---
import { defaultLang } from "../i18n";

// ğŸš€ En desarrollo: carga espaÃ±ol directamente
if (import.meta.env.DEV) {
  Astro.redirect("/es/");
} else {
  // ğŸŒ En producciÃ³n: detecta idioma automÃ¡ticamente
  const browserLang = Astro.request.headers.get("accept-language")?.slice(0, 2);
  const lang = ["en", "es"].includes(browserLang) ? browserLang : defaultLang;

  // Usa la base configurada (por ejemplo /cuernavaca_landing/)
  const base = import.meta.env.BASE_URL || "/";
  Astro.redirect(`${base}${lang}/`);
}
---
